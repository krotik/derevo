<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Selection Tree</title>
    <link rel="stylesheet" href="../../src/derevo.css">
    <script src="../../src/derevo.js"></script>
  </head>
  <body>
    <div id="tree"></div>
<script>

var treeData = [
    {
        name     : "Number 0",
        children : [
            {
                name     : "Number 0.0",
                children : [
                ]
            },
            {
                name     : "Number 0.1",
                children : [
                ]
            },
            {
                name     : "Number 0.2",
                children : [
                ]
            }
        ]
    },
    {
        name     : "Number 1",
        deferred : true,
        selected : true,
        children : [
        ]
    },
    {
        name     : "Number 2",
        children : [
            {
                name     : "Number 2.0",
                children : [
                ]
            },
            {
                name     : "Number 2.1",
                children : [
                ]
            },
            {
                name     : "Number 2.2",
                children : [
                ]
            }
        ]
    }
];

var options = {
    images : {
        line         : "background: url(\"../../src/img/tree_line.png\") repeat-y scroll 0px 0px transparent;",
        minusbottom  : "background: url(\"../../src/img/tree_minusbottom.png\") no-repeat scroll 0px 0px rgb(255, 255, 255);",
        plusbottom   : "background: url(\"../../src/img/tree_plusbottom.png\") repeat-y scroll 0px 0px rgb(255, 255, 255);",
        minus        : "background: url(\"../../src/img/tree_minus.png\") no-repeat scroll 0px 0px transparent;",
        plus         : "background: url(\"../../src/img/tree_plus.png\") repeat-y scroll 0px 0px transparent;",
        joinbottom   : "background: url(\"../../src/img/tree_joinbottom.png\") repeat-y scroll 0px 0px rgb(255, 255, 255);",
        join         : "background: url(\"../../src/img/tree_join.png\") repeat-y scroll 0px 0px transparent;"
    },

    buildDeferredData : function (index, children, callback) {
        "use strict";

        // This function has the context of the tree controller

        var parentSelected = this.getDataItem(index)["selected"];

        // HERE: we could do an ajax request and retrieve the new data

        children.push({
            name     : "Number " + index.replace(/L/,"") + ".0",
            selected : parentSelected,
            children : [
            ]
        }, {
            name     : "Number " + index.replace(/L/,"") + ".1",
            selected : parentSelected,
            children : [
            ]
        });

        callback();
    }
}

var tree = new derevo.SelectTreeController("tree", treeData, options);

</script>
  </body>
</html>
